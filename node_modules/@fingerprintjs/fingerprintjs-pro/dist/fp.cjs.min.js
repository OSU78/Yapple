/**
 * FingerprintJS Pro v3.6.3 - Copyright (c) FingerprintJS, Inc, 2022 (https://fingerprintjs.com)
 *
 * This software contains code from open-source projects:
 * MurmurHash3 by Karan Lyons (https://github.com/karanlyons/murmurHash3.js)
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");function R(e){for(var R="",t=0;t<e.length;++t)if(t>0){var r=e[t].toLowerCase();r!==e[t]?R+=" "+r:R+=e[t]}else R+=e[t].toUpperCase();return R}var t=R("WrongRegion"),r=R("SubscriptionNotActive"),o=R("UnsupportedVersion"),n=R("InstallationMethodRestricted"),E=R("HostnameRestricted");function _(e,R,t){return void 0===t&&(t=0),R(t).catch((function(r){if(t>=e.maxRetries)throw r;var o,n,E,i,a=(o=e.baseDelay,n=e.maxDelay,E=e.baseDelay*Math.pow(2,t),Math.max(o,Math.min(n,E)));return(i=a,new Promise((function(e){return setTimeout(e,i)}))).then((function(){return _(e,R,t+1)}))}))}var i="Failed to load the JS script of the agent",a="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js";function s(R){var t=R.scriptUrlPattern,r=R.token,o=R.apiKey,n=void 0===o?r:o,E=e.__rest(R,["scriptUrlPattern","token","apiKey"]),s=[];return Promise.resolve().then((function(){if(!n||"string"!=typeof n)throw new Error("API key required");return _({maxRetries:5,baseDelay:100,maxDelay:3e3},(function(){var e,R=new Date,r=function(){return s.push({startedAt:R,finishedAt:new Date})},o=(e=function(e,R){void 0===R&&(R=a);var t=encodeURIComponent;return R.replace(/<[^<>]+>/g,(function(R){return"<version>"===R?"3":"<apiKey>"===R?t(e):"<loaderVersion>"===R?t("3.6.3"):R}))}(n,t),new Promise((function(R,t){var r=document.createElement("script"),o=function(){var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},n=document.head||document.getElementsByTagName("head")[0];r.onload=function(){o(),R()},r.onerror=function(){o(),t(new Error(i))},r.async=!0,r.src=e,n.appendChild(r)})));return o.then(r,r),o}))})).then((function(){var R=window,t="__fpjs_p_l_b",r=R[t];if(function(e,R){var t,r=null===(t=Object.getOwnPropertyDescriptor)||void 0===t?void 0:t.call(Object,e,R);(null==r?void 0:r.configurable)?delete e[R]:r&&!r.writable||(e[R]=void 0)}(R,t),"function"!=typeof(null==r?void 0:r.load))throw new Error(i);return r.load(e.__assign(e.__assign({},E),{ldi:{attempts:s}}))}))}var O={load:s,ERROR_SCRIPT_LOAD_FAIL:i,ERROR_API_KEY_EXPIRED:"API key expired",ERROR_API_KEY_INVALID:"API key not found",ERROR_API_KEY_MISSING:"API key required",ERROR_BAD_REQUEST_FORMAT:"Request cannot be parsed",ERROR_BAD_RESPONSE_FORMAT:"Response cannot be parsed",ERROR_CLIENT_TIMEOUT:"Client timeout",ERROR_FORBIDDEN_ENDPOINT:E,ERROR_FORBIDDEN_HEADER:"Not available with restricted header",ERROR_FORBIDDEN_ORIGIN:"Not available for this origin",ERROR_GENERAL_SERVER_FAILURE:"Request failed",ERROR_INSTALLATION_METHOD_RESTRICTED:n,ERROR_NETWORK_ABORT:"Network request aborted",ERROR_NETWORK_CONNECTION:"Network connection error",ERROR_RATE_LIMIT:"Too many requests, rate limit exceeded",ERROR_SERVER_TIMEOUT:"Request failed to process",ERROR_SUBSCRIPTION_NOT_ACTIVE:r,ERROR_TOKEN_EXPIRED:"API key expired",ERROR_TOKEN_INVALID:"API key not found",ERROR_TOKEN_MISSING:"API key required",ERROR_UNSUPPORTED_VERSION:o,ERROR_WRONG_REGION:t};exports.ERROR_API_KEY_EXPIRED="API key expired",exports.ERROR_API_KEY_INVALID="API key not found",exports.ERROR_API_KEY_MISSING="API key required",exports.ERROR_BAD_REQUEST_FORMAT="Request cannot be parsed",exports.ERROR_BAD_RESPONSE_FORMAT="Response cannot be parsed",exports.ERROR_CLIENT_TIMEOUT="Client timeout",exports.ERROR_FORBIDDEN_ENDPOINT=E,exports.ERROR_FORBIDDEN_HEADER="Not available with restricted header",exports.ERROR_FORBIDDEN_ORIGIN="Not available for this origin",exports.ERROR_GENERAL_SERVER_FAILURE="Request failed",exports.ERROR_INSTALLATION_METHOD_RESTRICTED=n,exports.ERROR_NETWORK_ABORT="Network request aborted",exports.ERROR_NETWORK_CONNECTION="Network connection error",exports.ERROR_RATE_LIMIT="Too many requests, rate limit exceeded",exports.ERROR_SCRIPT_LOAD_FAIL=i,exports.ERROR_SERVER_TIMEOUT="Request failed to process",exports.ERROR_SUBSCRIPTION_NOT_ACTIVE=r,exports.ERROR_TOKEN_EXPIRED="API key expired",exports.ERROR_TOKEN_INVALID="API key not found",exports.ERROR_TOKEN_MISSING="API key required",exports.ERROR_UNSUPPORTED_VERSION=o,exports.ERROR_WRONG_REGION=t,exports.default=O,exports.load=s;
